# 排除文件管理 - 快速上手

## 🚀 如何使用

### 1. 进入管理界面
```
启动程序 → 系统配置 → 选择 "📋 管理排除文件"
```

### 2. 界面操作
```
当前排除模式：
  ▸ 通配符: *.userdb
    通配符: *.custom.yaml
    正则: ^sync/.*
    精确: installation.yaml
  
  ▸ [添加新模式]
    [重置为默认]

快捷键:
  ↑/↓ 或 j/k   - 上下选择
  Enter 或 空格 - 编辑/执行
  d 或 x       - 删除当前项
  q 或 Esc     - 返回配置菜单
```

### 3. 添加新模式
1. 选择「添加新模式」按 Enter
2. 输入模式，例如：
   - `*.bak` - 排除所有备份文件
   - `temp/*` - 排除 temp 目录
   - `^logs/.*$` - 排除 logs 目录（正则）
3. 按 Enter 保存，Esc 取消

### 4. 编辑现有模式
1. 选中要编辑的模式
2. 按 Enter
3. 修改内容
4. 按 Enter 保存

### 5. 删除模式
- 选中模式后按 `d` 或 `x` 即可删除

### 6. 重置为默认
- 选择「重置为默认」会恢复推荐的8个模式

## 📝 模式语法

### 通配符（最简单）
```
*.yaml          - 所有 yaml 文件
dicts/*.txt     - dicts 目录下的 txt 文件
temp/**/*       - temp 及其子目录下所有文件
```

### 正则表达式（高级）
```
^sync/.*$       - sync 目录开头
.*\.userdb$     - .userdb 结尾
^(sync|build)/  - sync 或 build 目录
```

### 精确匹配
```
installation.yaml   - 只匹配这个文件
user.yaml          - 只匹配这个文件
```

## ⚠️ 注意事项

1. **模式会自动验证**，无效的模式会显示错误提示
2. **删除操作不可撤销**，请谨慎删除
3. **重置会覆盖**所有自定义模式，请确认后操作
4. 修改后会**立即保存**到配置文件

## 💡 推荐配置

默认已包含这些保护：
- 用户词库 (`*.userdb`)
- 自定义配置 (`*.custom.yaml`)
- 系统文件 (`installation.yaml`, `user.yaml`)
- 同步/构建目录 (`^sync/.*`, `^build/.*`)

建议根据个人需求添加：
- 备份文件：`*.bak`
- 临时文件：`*.tmp`, `*.swp`
- 自定义目录：`my_custom/*`

## 🎯 常见场景

### 场景 1：保护自定义词库
```
添加: lua/my_dict.lua
```

### 场景 2：排除测试文件
```
添加: test/*
或: *.test.yaml
```

### 场景 3：保护某个目录
```
添加: ^my_config/.*
```

## 🐛 故障排除

**Q: 为什么我的模式不生效？**
A: 检查模式语法是否正确，可以在添加时看错误提示

**Q: 如何查看哪些文件会被排除？**
A: 界面会显示模式类型（通配符/正则/精确），根据此判断

**Q: 误删了模式怎么办？**
A: 可以「重置为默认」恢复，或手动重新添加

**Q: 能同时用多种模式吗？**
A: 可以！推荐混用：简单场景用通配符，复杂场景用正则

---

**提示**：所有修改会自动保存到 `~/.rime-updater/config.json`
